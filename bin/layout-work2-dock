#!/usr/bin/env bash

set -eu

xrandr \
	--output DP-2-2-8 --mode 2560x1440 --pos 0x0 --dpi 96 \
	--output DP-2-1 --mode 1920x1080 --pos 2560x360 --dpi 96 \
	--output eDP-1 --mode 1920x1080 --pos 1400x1440 --dpi 96 --primary

xinput map-to-output 'Raydium Corporation Raydium Touch System' eDP-1 || :

# kernel/intel bug workaround, disable dpms when docked
perl -i -pe 's/dpmsEnabled:\s*\K\w+/False/' ~/.xscreensaver
if ! xscreensaver-command -time | grep -q ': screen locked since'; then
	systemctl --user restart xscreensaver.service
fi
xset -dpms
